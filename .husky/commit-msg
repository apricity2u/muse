#!/bin/sh

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# commit -m ì˜µì…˜ ê°ì§€
if ! grep -q "^#" "$commit_msg_file"; then
    echo "âŒ 'git commit -m' ì˜µì…˜ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
    echo "
ğŸ’¡ ë‹¤ìŒê³¼ ê°™ì´ í•©ë‹ˆë‹¤.
1. git commit (ì—”í„°)
2. í…œí”Œë¦¿ì— ë§ì¶° ì»¤ë°‹ ë©”ì„¸ì§€ ì‘ì„±
3. ì €ì¥ í›„ ì¢…ë£Œ
"
    exit 1
fi

# ì£¼ì„ ì œì™¸í•œ ì‹¤ì œ ì»¤ë°‹ ë©”ì‹œì§€ ì¶”ì¶œ
filtered_msg=$(echo "$commit_msg" | grep -v '^#')

# ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹ ê²€ì‚¬ (Jira ID ì œê±°ë¨)
if ! echo "$filtered_msg" | grep -qE '^(feat|fix|docs|style|refactor|test|chore): .+'; then
    echo "âŒ ì˜ëª»ëœ ì»¤ë°‹ ë©”ì„¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤."
    echo "
    ì˜¬ë°”ë¥¸ ì»¤ë°‹ ë©”ì„¸ì§€ í˜•ì‹ ì˜ˆì‹œ:
    chore: husky ì„¤ì •
    feat: íšŒì›ê°€ì… ê¸°ëŠ¥ ì¶”ê°€
    fix: ë¡œê·¸ì¸ ì˜¤ë¥˜ ìˆ˜ì •
    "
    exit 1
fi
